#   <b>执行环境

##  <b>- 目录: 
>   <font style="color:red">注意 : Excution Context可被翻译为「执行上下文」或者「执行环境」。</font>
+   1 什么是执行环境(Excution Context)?

+   2 执行环境栈(Excution Stack)

+   3 执行环境的具体细节</b>

---
##  <strong>- 内容:</strong>
+   什么是执行环境(Excution Context)?
    ```
        每当程序的「执行流」进入到一段可执行的代码时,就进入到了一个「执行环境」中。

        执行环境是ECMA-262中用以区分不同类型的可执行片段的抽象概念。
    
        可执行代码的类型可分为:

            a) 全局代码: 默认环境，你的代码第一时间在这儿运行。

            b) 函数代码: 当执行流进入一个函数体的时候。

            c) Eval代码: 在eval()函数中的文本。
    ```
+   执行环境栈(Excution Stack)
    ```
        JavaScript解析器是单线程的,这意味着浏览器在同一时间只能执行一个事件,对于其他的事件我们把它们排队在一个称为「执行栈」的地方。下图是一个单线程栈的抽象视图。
    ```
    ![单线程栈抽象视图](../imgs/单线程栈抽象视图.jpg)
    ```
        当浏览器第一次加载你的script,它默认进入了全局执行环境。如果你的全局代码中调用了一个函数,那么执行流就会进入到你调用的函数中,创建一个新的执行环境并且把这个执行环境添加到顶部。

        如果在你当前的函数中调用了其他函数,同样的函数会再次发生。执行流 会进入函数内部,并创建一个新的执行环境,把它添加到已经存在的执行栈的顶部。浏览器始终执行当前栈顶部的执行环境。一旦执行完了当前的执行环境的代码,它会被弹出栈的顶部,把控制权返回给当前执行栈中的下一个执行环境。下面例子展示了一个递归函数和该程序的执行栈。

        (function foo(i) {
            if (i === 3) {
                return;
            }else {
                foo(++i);
            }
        }(0));
    ```
    ![执行栈案例解析图](../imgs/执行栈案例解析图.gif)
    ```
        这段代码简单地调用了自己三次，由1递增i的值。每次函数foo被调用，一个新的执行环境就会被调用。一旦一个环境完成了执行，它就会被弹出执行栈并且把控制权返回给当前执行环境的下个执行环境直到再次到达全局执行环境。
    ```
    <font style="color:red">记住执行栈，这儿有五个关键点:</font>
    ```
        1. 单线程;

        2. 同步执行;

        3. 一个全局执行环境,在执行栈的底部;
        
        4. 无限的函数执行环境;

        5. 函数被调用时.会创建一个新的执行环境被压入到执行栈中,执行完的执行环境会被弹出执行栈并把执行权交给下一个环境;
    ```
